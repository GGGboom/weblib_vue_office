webpackJsonp([3,7],{"0Md2":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.contactsTree[data-v-a25d4a26] .custom-tree-node {\n  border-bottom: 1px solid #f1f1f1;\n  width: 95%;\n  line-height: 30px;\n  font-size: 12px;\n}\n.contactsTree[data-v-a25d4a26] .el-tree-node__content {\n  height: 38px !important;\n}\n",""])},"9R71":function(t,e,a){var o=a("0Md2");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("0ce05851",o,!0)},CRca:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("RhA+"),n=a("yPtK"),s={name:"contact",components:{Breadcrumb:a("UqIz").a,ContactsTree:n.default},created(){},data:()=>({loading:!1,tableSelection:[],tableData:[],emptyText:"暂无数据",total:0,path:[{displayName:"通讯录"}],page:{start:0,limit:40}}),methods:{getContacts(){this.loading=!0,Object(o.a)(this.page).then(t=>{t=t.data,localStorage.contacts=JSON.stringify(t),this.tableData=t.accounts,this.total=t.totalCount,this.loading=!1})},handleSizeChange(t){this.page.limit=t,this.getContacts()},handleCurrentChange(t){this.page.start=(t-1)*this.page.limit,this.getContacts()},handleSelectionChange(t){this.tableSelection=t}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flexBox"},[e("div",{staticClass:"breadcrumbWrap flexHeader"},[e("breadcrumb",{staticClass:"breadcrumb-container",attrs:{path:this.path}})],1),this._v(" "),e("div",{staticClass:"flexBody"},[e("contacts-tree")],1)])},staticRenderFns:[]};var r=a("VU/8")(s,i,!1,function(t){a("npvW")},"data-v-03aa49d7",null);e.default=r.exports},npvW:function(t,e,a){var o=a("ozIS");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("bec82418",o,!0)},ozIS:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},yPtK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("RhA+"),n={name:"contractTree",created(){localStorage.contactStore=void 0,Object(o.b)().then(t=>{t=t.data})},data:()=>({loading:!1,doNotInit:!0,props:{id:"id",isLeaf:(t,e)=>"person"===t.type||t.isLeaf}}),methods:{getMyContacts(t){Object(o.b)().then(e=>{if(e=e.data,this.loading=!1,e.folder=e.folder.map(t=>({label:t.text,id:t.id,type:"folder"})),e.member=e.member.map(t=>({label:t.fullName,id:t.id,type:"person"})),e.team=e.team.map(t=>({label:t.text,id:t.id,type:"team"})),void 0===localStorage.contactStore||"undefined"===localStorage.contactStore){try{const t={lastModified:e.folder[0].lastModified,data:[...e.folder,...e.member,...e.team]};localStorage.contactStore=JSON.stringify(t)}catch(t){console.log("存储通讯录失败，可能通讯录没数据")}return t([...e.folder,...e.member,...e.team])}e.folder.length>0&&e.folder[0].lastModified!==JSON.parse(localStorage.contactStore).lastModified&&this.$confirm("通讯录有新的修改，是否更新?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.contactStore=void 0,this.doNotInit=!1,setTimeout(()=>{this.doNotInit=!0},500)}).catch(()=>{this.$message({type:"info",message:"取消操作"})})})},loadNode(t,e){if(0===t.level){if(this.loading=!0,void 0!==localStorage.contactStore&&"undefined"!==localStorage.contactStore){const t=JSON.parse(localStorage.contactStore);return this.loading=!1,this.getMyContacts(e),e(t.data)}this.getMyContacts(e)}else"person"!==t.data.type&&Object(o.b)({id:t.data.id,folderOnly:!1}).then(a=>(a=a.data,"team"===t.data.type?(this.loading=!1,a.members=a.members.map(t=>({label:t.fullName,id:t.id,type:"person"})),e([...a.members])):(this.loading=!1,a.folder=a.folder.map(t=>({label:t.text,id:t.id,type:"folder"})),a.member=a.member.map(t=>({label:t.fullName,id:t.id,type:"person"})),a.team=a.team.map(t=>({label:t.text,id:t.id,type:"team"})),e([...a.folder,...a.member,...a.team]))))}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.doNotInit?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"contactsTree",staticStyle:{width:"100%"},attrs:{size:"mini",props:t.props,load:t.loadNode,lazy:""},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.node,n=e.data;return a("div",{staticClass:"custom-tree-node"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content bg-purple"},["team"===n.type?a("svg-icon",{attrs:{"icon-class":"team"}}):t._e(),t._v(" "),"folder"===n.type?a("svg-icon",{attrs:{"icon-class":"cluster"}}):t._e(),t._v(" "),"person"===n.type?a("svg-icon",{attrs:{"icon-class":"user2"}}):t._e(),t._v(" "),a("span",{domProps:{innerHTML:t._s(o.label)}})],1)]),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple",domProps:{innerHTML:t._s(n.position)}})]),t._v(" "),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"grid-content bg-purple",domProps:{innerHTML:t._s(n.email)}})]),t._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"grid-content bg-purple",domProps:{innerHTML:t._s(n.mobile)}})])],1)],1)}}])}):t._e()],1)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(t){a("9R71")},"data-v-a25d4a26",null);e.default=i.exports}});