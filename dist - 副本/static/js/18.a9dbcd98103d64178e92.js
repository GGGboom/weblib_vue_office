webpackJsonp([18],{"0DIY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("IvPr"),n=a("UqIz"),l=a("NYxO"),i=a("S6Qt"),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},o={name:"receive",components:{Breadcrumb:n.a,receiveTree:i.default},created(){this.$root.$on("delete-receive-callback",this.deleteReceiveCallback),this.listQuery.start=0,this.searchResources(this.$route.params.id)},computed:r({searchResults(){return this.resources.searchResults},isSearch(){return this.resources.isSearch},searchParams(){return this.resources.searchParams}},Object(l.b)(["resources","personalGroupID"])),watch:{$route(e,t){this.isPaging=!1,this.listQuery.start=0,this.searchResources(e.params.id),e.params.id>0&&this.$store.dispatch("ClearSearch").then(e=>{})},searchResults(e){const t=e.resources;this.tableData=[],this.total=e.totalCount,this.listLoading=!1,this.path=e.path,this.$nextTick(()=>{this.tableData=t})},tableSelection(e){0==e.length&&(e=void 0),this.$store.dispatch("SetTableSelection",e)}},data(){return{tableData:null,tableSelection:[],total:null,dialogUpload:!1,path:null,emptyText:"暂无数据",loading:!1,id:this.$route.params.id,isPaging:!0,listQuery:{start:0,limit:40,memberId:this.$store.getters.memberId}}},methods:{searchResources(){Object(s.b)(this.listQuery).then(e=>{this.isPaging=!0;const t=(e=e.data).shareRecords;this.total=e.totalCount,this.tableData=[],this.path=[{displayName:"我的接收"}],this.$nextTick(()=>{this.tableData=t,0===this.tableData.length&&(this.emptyText="暂无数据"),this.loading=!1})})},handleCurrentChange(e){this.listQuery.start=(e-1)*this.listQuery.limit,this.searchResources()},handleSizeChange(e){this.listQuery.limit=e,this.searchResources()},handleDownload(e){location.href="/group/downloadResource_v2?id="+e},handleSelectionChange(e){this.tableSelection=e},deleteReceiveCallback(){let e=[];0!==(e=this.tableSelection.map(e=>e.resources.map(e=>e.id))).length?this.$confirm("此操作将删除所选文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(s.a)({id:e.join(",")}).then(e=>{this.searchResources(),this.$message({showClose:!0,message:"操作成功",type:"success"})})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})}):this.$message({showClose:!0,message:"请选择一个操作项！",type:"warning",duration:1e3})},handleFileClick(e){location.hash="/personal/main/"+e.id},handleExpand(e){const t=e.resources;let a=null;t.length>0&&"0"===t[0].status&&(a=t.map(e=>e.id),Object(s.d)({id:a.join(",")}).then(t=>{t=t.data,this.$store.dispatch("SetMyReceiveCount"),e.resources[0].status="1",this.isShow(e)}))},isShow:e=>e.resources.length>0&&"0"===e.resources[0].status,expandOrNot(e){this.$refs.table.toggleRowExpansion(e)}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flexBox"},[a("div",{staticClass:"breadcrumbWrap flexHeader"},[a("breadcrumb",{staticClass:"breadcrumb-container",attrs:{path:e.path}})],1),e._v(" "),a("div",{staticClass:"flexBody"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:0,ref:"table",staticClass:"receiveTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange,"expand-change":e.handleExpand}},[a("div",{staticClass:"empty",attrs:{slot:"empty"},slot:"empty"},[e._v(e._s(e.emptyText))]),e._v(" "),a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("receive-tree",{attrs:{data:e.row}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"分享人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isShow(t.row)?a("el-badge",{staticClass:"item",attrs:{"is-dot":""}},[a("span",[e._v("\n            "+e._s(t.row.provider)+"\n          ")])]):e._e(),e._v(" "),e.isShow(t.row)?e._e():a("span",[e._v("\n            "+e._s(t.row.provider)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"包含文件",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){e.expandOrNot(t.row)}}},[a("svg-icon",{staticClass:"icon",staticStyle:{"font-size":"20px"},attrs:{"icon-class":"folder"}}),e._v(" "),a("span",{attrs:{title:t.row.resources[0].displayName+"等"},domProps:{innerHTML:e._s(t.row.resources[0].displayName+"等")}})],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"分享时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"white-space":"nowrap"}},[e._v(e._s(t.row.shareDate))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"附言",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{width:"100%","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"},attrs:{title:t.row.remark}},[a("span",{attrs:{title:t.row.remark},domProps:{innerHTML:e._s(t.row.remark)}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-container flexFooter",staticStyle:{display:"none"}},[e.isPaging?a("el-pagination",{attrs:{background:"",total:e.total,"page-size":e.listQuery.limit,"page-sizes":[40,60,80],layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)])},staticRenderFns:[]};var d=a("VU/8")(o,c,!1,function(e){a("k9ja")},"data-v-09a03512",null);t.default=d.exports},E5yY:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.breadcrumbWrap[data-v-09a03512] {\n  border-bottom: 1px solid #e6e6e6;\n  height: 40px;\n}\n.el-breadcrumb__item[data-v-09a03512] {\n  height: 40px !important;\n  line-height: 40px !important;\n}\n.receiveTable[data-v-09a03512] {\n  /*.el-table__expand-icon {*/\n  /*width: 28px;*/\n  /*height: 20px;*/\n  /*}*/\n}\n.receiveTable[data-v-09a03512] .el-table__header th:nth-of-type(1) .cell {\n    width: 35px;\n}\n.receiveTable[data-v-09a03512] .el-table__header th:nth-of-type(2) .cell {\n    width: 48px;\n}\n.receiveTable[data-v-09a03512] .el-table__header th:nth-of-type(3) .cell {\n    width: 120px;\n}\n.receiveTable[data-v-09a03512] .el-table__header th:nth-of-type(5) .cell {\n    width: 100px;\n}\n.receiveTable[data-v-09a03512] .el-table__header th:nth-of-type(6) .cell {\n    width: 150px;\n}\n.receiveTable[data-v-09a03512] .el-table__body td:nth-of-type(1) .cell {\n    width: 35px;\n}\n.receiveTable[data-v-09a03512] .el-table__body td:nth-of-type(2) .cell {\n    width: 48px;\n}\n.receiveTable[data-v-09a03512] .el-table__body td:nth-of-type(3) .cell {\n    width: 120px;\n}\n.receiveTable[data-v-09a03512] .el-table__body td:nth-of-type(5) .cell {\n    width: 100px;\n}\n.receiveTable[data-v-09a03512] .el-table__body td:nth-of-type(6) .cell {\n    width: 200px;\n}\n.receiveTable[data-v-09a03512] .el-tree-node__content {\n    background: #fafafa !important;\n    border-bottom: 1px dotted #ddd;\n}\n.receiveTable[data-v-09a03512] .el-tree-node__label {\n    font-size: 12px !important;\n}\n.receiveTable[data-v-09a03512] .el-table__expanded-cell[class*=cell] {\n    padding: 10px 46px;\n    background: #fafafa !important;\n}\n.receiveTable[data-v-09a03512] .is-dot {\n    top: 4px;\n}\n",""])},k9ja:function(e,t,a){var s=a("E5yY");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("1e27fed1",s,!0)}});