webpackJsonp([19],{GstZ:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("vLgD"),a=(o("mtWM"),{name:"info",data:()=>({iconurl:null,name:null,acount:null,icon:null,totalsize:0,usesize:0,useGb:0,totalGb:0,use_percent:0,dialogvisible:!1,dialogvisible2:!1,progresscolor:"#1989fa",formLabelWidth:"120px",form:{password:null,newpassword:null,confirmNewPassword:null}}),created(){window.open("http://127.0.0.1:8014/onlinePreview?url="+encodeURIComponent("http://localhost:9090/group/downloadResource_v2?id=289&fullfilename=test.pdf")),this.getusericon().then(e=>{console.log("进入"),console.log(e);const t=e.data;this.iconurl=t.profilePics[0].picUrl,this.$refs.headicon.src="http://"+window.location.host+this.iconurl}),console.log("获取使用情况"),this.getuse().then(e=>{const t=e.data;console.log("获取使用情况"),this.totalsize=t.totalSize,this.usesize=t.resourcesSize,this.totalGb=Number(this.totalsize/1024/1024).toFixed(2),this.useGb=Number(this.usesize/1024/1024).toFixed(2),console.log(this.totalsize),console.log(this.usesize),this.use_percent=this.usesize/this.totalsize*100,this.use_percent=Number(this.use_percent.toFixed(2)),console.log(typeof this.use_percent),console.log(this.use_percent)})},beforeCreate(){},methods:{getusericon(){return Object(s.a)({url:"/user/getProfilePic",method:"post",params:{account:this.$store.getters.account}})},BeforeUpload(e){"image/png"!==e.type&&"image/gif"!==e.type&&"image/jpg"!==e.type&&"image/jpeg"!==e.type&&this.$message.error("请上传格式为image/png, image/gif, image/jpg, image/jpeg的图片")},modifyps(){this.form.newpassword==this.form.confirmNewPassword?Object(s.a)({url:"/user/modifyPassword_v2",method:"post",params:{password:this.form.password,newPassword:this.form.newpassword}}).then(e=>{const t=e.data;console.log(t),console.log(t.result),1==t.result?(this.dialogvisible=!1,this.$message({message:t.message,type:"success"})):this.$message({message:t.message,type:"warning"}),console.log(e)}):(this.form.newpassword=null,this.form.confirmNewPassword=null,this.$message({message:"两次输入密码不一致！请重新输入",type:"warning"})),console.log(this.form.password),console.log(this.form.newpassword)},getuse:()=>Object(s.a)({url:"/group/getResourceSize_v2",method:"post",params:{groupId:Math.abs(localStorage.groupId)}}),uploadicon(e){let t=new FormData;t.append("filedata",e.file),t.append("filename",e.file.name),Object(s.a)({url:"/user/uploadProfilePic",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t}).then(e=>{200==e.status?location.reload():this.$message({message:"请确认图片格式",type:"warning"})})}}}),i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{width:"100%",height:"30px","margin-left":"0px","margin-top":"15px","border-bottom":"1px #000 solid"}},[e._v("个人基本信息")]),e._v(" "),o("div",{staticStyle:{width:"100%",height:"150px"}},[o("div",{staticStyle:{float:"left",width:"140px",height:"100%","margin-left":"10px","margin-top":"10px","margin-bottom":"10px"}},[o("img",{ref:"headicon",staticStyle:{width:"140px",height:"140px"}})]),e._v(" "),o("div",{staticStyle:{float:"left",height:"100%","margin-left":"10px","margin-top":"10px","margin-bottom":"10px"}},[o("p",[e._v("账号："+e._s(this.$store.getters.account))]),e._v(" "),o("p",[e._v("用户名："+e._s(this.$store.getters.name))]),e._v(" "),o("el-upload",{staticClass:"upload-demo",staticStyle:{float:"left"},attrs:{accept:"image/png,image/gif,image/jpg,image/jpeg","before-upload":e.BeforeUpload,"show-file-list":!1,"http-request":e.uploadicon,action:"string"}},[o("el-button",{attrs:{type:"primary"}},[e._v("修改头像")])],1),e._v(" "),o("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogvisible=!0}}},[e._v("修改密码")]),e._v(" "),o("el-dialog",{attrs:{title:"修改密码",visible:e.dialogvisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dialogvisible=t}}},[o("el-form",{attrs:{model:this.form}},[o("el-form-item",{attrs:{label:"原始密码","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"password"},model:{value:e.form.newpassword,callback:function(t){e.$set(e.form,"newpassword",t)},expression:"form.newpassword"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"确认新密码","label-width":e.formLabelWidth}},[o("el-input",{staticStyle:{width:"300px"},attrs:{type:"password"},model:{value:e.form.confirmNewPassword,callback:function(t){e.$set(e.form,"confirmNewPassword",t)},expression:"form.confirmNewPassword"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogvisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.modifyps}},[e._v("确 定")])],1)],1)],1)]),e._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticStyle:{"margin-top":"20px",height:"200px","border-top":"#000 1px solid"}},[o("p",{staticStyle:{"border-bottom":"#000 1px solid"}},[e._v("系统基本信息")]),e._v(" "),o("p",[e._v("文件柜总容量："+e._s(e.totalGb)+"GB")]),e._v(" "),o("p",[e._v("已使用容量:"+e._s(e.useGb)+"GB")]),e._v(" "),o("el-progress",{staticStyle:{"margin-top":"20px"},attrs:{"text-inside":!1,color:e.progresscolor,"show-text":!0,"stroke-width":20,percentage:e.use_percent}})],1)])],1)],1)},staticRenderFns:[]};var r=o("VU/8")(a,i,!1,function(e){o("QnfF")},"data-v-04474f45",null);t.default=r.exports},Qg1W:function(e,t,o){(e.exports=o("FZ+f")(!1)).push([e.i,"\n.el-row[data-v-04474f45] {\n    margin-bottom: 20px;\n    height:10px;\n&:last-child {\n     margin-bottom: 0;\n}\n}\n.el-col[data-v-04474f45] {\n    border-radius: 4px;\n}\n.bg-purple-dark[data-v-04474f45] {\n    background: #99a9bf;\n}\n.bg-purple[data-v-04474f45] {\n    background: #d3dce6;\n}\n.bg-icon[data-v-04474f45]{\n    float: left;\n    background: white;\n    height: 120px;\n    margin-top: 10px;\n    margin-left: 20px;\n}\n.bg-purple-light[data-v-04474f45] {\n    background: #e5e9f2;\n}\n.grid-content[data-v-04474f45] {\n    border-radius: 4px;\n    min-height: 36px;\n}\n.row-bg[data-v-04474f45] {\n    padding: 10px 0;\n    background-color: #f9fafc;\n}\n",""])},QnfF:function(e,t,o){var s=o("Qg1W");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o("rjj0")("7595a934",s,!0)}});