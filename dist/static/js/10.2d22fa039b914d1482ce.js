webpackJsonp([10],{"45Ee":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.breadcrumbWrap[data-v-6b58f457] {\n  border-bottom: 1px solid #e6e6e6;\n  height: 40px;\n}\n.el-breadcrumb__item[data-v-6b58f457] {\n  height: 40px !important;\n  line-height: 40px !important;\n}\n",""])},Rv23:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("A5HE"),i=a("UqIz"),o=(a("8ZKb"),a("AmOA"),{components:{Breadcrumb:i.a},created(){this.listQuery.groupId=Math.abs(parseInt(localStorage.groupId)),this.displayName=localStorage.groupName===this.$store.getters.account?"个人资源库":localStorage.groupName,this.listQuery.query=this.$route.params.query,this.getResources(),this.$root.$on("advance-search-callback",this.advanceSearchCallback)},computed:{},watch:{$route(t,e){this.listQuery.query=t.params.query,this.listQuery.groupId=Math.abs(parseInt(localStorage.groupId)),this.displayName=localStorage.groupName,this.listQuery.start=0,this.isPaging=!1,this.getResources()},tableSelection(t){0==t.length&&(t=void 0),this.$store.dispatch("SetTableSelection",t)}},data:()=>({tableData:null,total:null,listLoading:!0,path:null,displayName:null,isPaging:!0,markRow:null,tableSelection:[],rowHeightLight:"",listQuery:{start:0,limit:40,query:null,groupId:null}}),methods:{advanceSearchCallback(t){this.listQuery.query=this.$route.params.query,this.listQuery.groupId=Math.abs(parseInt(localStorage.groupId)),this.displayName=localStorage.groupName,this.listQuery.start=0,this.isPaging=!1,this.listQuery=Object.assign({},this.listQuery,t),this.getResources()},getResources(){"1"===localStorage.searchSelect&&(this.listQuery=Object.assign({},this.listQuery,{groupId:null}),this.displayName="全库"),this.listLoading=!0,this.tableData=[],Object(s.s)(this.listQuery).then(t=>{this.isPaging=!0;const e=(t=t.data).resources;this.total=t.totalCount,this.listLoading=!1,this.path=t.path,this.$nextTick(()=>{this.tableData=e})})},handleCurrentChange(t){this.listQuery.start=(t-1)*this.listQuery.limit,this.getResources()},handleSizeChange(t){this.listQuery.limit=t,this.getResources()},handleDownload(t){location.href="/group/downloadResource_v2?id="+t},contextmenuCallback(t){this.markRow=t;let e=this.$store.getters.resources.tableSelections;void 0!==e&&null!==e?(e=e.map(t=>t.id)).indexOf(t.id)<0&&(this.$refs.table.clearSelection(),this.$refs.table.toggleRowSelection(t)):this.$refs.table.toggleRowSelection(t)},contextEvent(t){switch(t){case 0:location.href="/group/downloadResource_v2?id="+this.markRow.id;break;case 1:let{parentId:e,id:a,groupId:i}=this.markRow;0===e&&(e=-i),Object(s.m)({parentId:e,resourceId:a,pageSize:40}).then(t=>{t=t.data,this.$store.dispatch("SetPageNum",t.pageNow),localStorage.queryResourceId=a,this.markRow.owner?this.$router.push({path:"/personal/main/"+e}):this.$router.push({path:"/public/main/"+e})})}},handleSelectionChange(t){this.tableSelection=t},doSearchUsers(){}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flexBox"},[a("div",{staticClass:"breadcrumbWrap flexHeader"},[a("span",{staticStyle:{"padding-left":"10px","line-height":"40px",color:"#606266","font-size":"14px"}},[t._v(" 在【"+t._s(t.displayName)+"】中搜索，关键字:"+t._s(t.listQuery.query))])]),t._v(" "),a("div",{staticClass:"flexBody"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"},{name:"contextmenu",rawName:"v-contextmenu:contextmenu",arg:"contextmenu"}],key:0,ref:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark","row-class-name":t.rowHeightLight},on:{"row-contextmenu":t.contextmenuCallback,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),t._v(" "),a("el-table-column",{attrs:{label:"文件名"},scopedSlots:t._u([{key:"default",fn:function(e){return["folder"===e.row.type?a("span",[a("svg-icon",{staticClass:"icon",staticStyle:{"font-size":"20px"},attrs:{"icon-class":"folder"}}),t._v(" "),a("router-link",{attrs:{to:{path:"/personal/main/"+e.row.id}},domProps:{innerHTML:t._s(e.row.displayName)}})],1):t._e(),t._v(" "),"file"===e.row.type?a("span",[a("i",{staticClass:"el-icon-document",staticStyle:{"font-size":"16px"}}),t._v(" "),a("a",{attrs:{href:"#"},domProps:{innerHTML:t._s(e.row.displayName)},on:{click:function(a){t.handleDownload(e.row.id)}}})]):t._e(),t._v(" "),"link"===e.row.type?a("span",[a("i",{staticClass:"el-icon-view",staticStyle:{"font-size":"16px"}}),t._v(" "),a("a",{attrs:{href:"#",href:e.row.id,target:"_blank"},domProps:{innerHTML:t._s(e.row.displayName)}})]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"所属资源库",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{domProps:{innerHTML:t._s(e.row.groupName)}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"文件大小",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("fileSize")(e.row.size)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"180",label:"上传时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.creationDate))])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination-container flexFooter"},[t.isPaging?a("el-pagination",{attrs:{background:"",total:t.total,"page-size":t.listQuery.limit,"page-sizes":[40,60,80],layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1),t._v(" "),a("v-contextmenu",{ref:"contextmenu",staticStyle:{width:"145px"}},[a("v-contextmenu-item",{on:{click:function(e){t.contextEvent(0)}}},[t._v("下载")]),t._v(" "),a("v-contextmenu-item",{attrs:{divider:""}}),t._v(" "),a("v-contextmenu-item",{on:{click:function(e){t.contextEvent(1)}}},[t._v("打开文件所在位置")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("ejZu")},"data-v-6b58f457",null);e.default=r.exports},ejZu:function(t,e,a){var s=a("45Ee");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("531fdc3e",s,!0)}});